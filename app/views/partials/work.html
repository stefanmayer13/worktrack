<div class="work" ng-controller="WorkCtrl">
<div class="jumbotron">
    <p class="workinfo" ng-show="tasks.workedToday">Todays work: <b>{{tasks.workedToday}}h</b></p>
    <div class="form-group">
        <label>Enter Task</label>
        <input type="text"
               name="task"
               required
               class="form-control"
               ng-trim="false"
               ng-change="valueEnteredChanged()"
               ng-keydown="keydown($event)"
               ng-enter="submit()"
               ng-model="task.input"
               ng-focus="onFocus($event)">
        <div ng-if="autocomplete" class="autocomplete">
            <ul>
                <li ng-click="selectTaskNr(actask)" ng-repeat="actask in tasks | filter:task.nr | unique:'nr'" ng-class="{active: $index === activeIndex}">{{actask.nr}}</li>
            </ul>
        </div>
        <label class="checkbox">
            <input type="checkbox" name="synctojira" value="synctojira" ng-model="task.synctojira" ng-change="valueEnteredChanged()"> Sync to jira
        </label>
        <label class="checkbox">
            <input type="checkbox" name="persistdate" value="persistdate" ng-model="task.persistdate" ng-change="valueEnteredChanged()"> Persist date
        </label>
        <label class="checkbox">
            <input type="checkbox" name="calculatedhours" value="calculatedhours" ng-model="task.calculatedhours" ng-change="valueEnteredChanged()"> Has calculated hours
        </label>
    </div>
    <p>{{task.nr}}<span ng-show="task.start"> from {{task.start | date:'HH:mm'}}</span><span ng-show="task.end"> to {{task.end | date:'HH:mm'}}</span><span ng-show="task.start"> at {{task.start | date:'dd.MM.yyyy'}}</span></p>
    <p>{{task.descr}}</p>
</div>
<table ng-show="tasks.tasks">
    <tr>
        <th>Status</th>
        <th>Task</th>
        <th>Date</th>
        <th>Time</th>
        <th>Description</th>
    </tr>
    <tr ng-repeat="task in tasks.tasks">
        <td>{{task.jiraid | checkmark}}</td>
        <td>{{task.nr}}</td>
        <td>{{task.start | date:'dd.MM.yyyy'}}</td>
        <td>{{parseHours(task.time)}}:{{parseMinutes(task.time)}}<span ng-show="task.end"> {{task.start | date:'HH:mm'}}-{{task.end | date:'HH:mm'}}</span></td>
        <td>{{task.descr}}</td>
    </tr>
    <tr>
        <td ng-click="getMore()" ng-if="tasks.tasks.length < tasks.count" class="cta">.....</td>
    </tr>
</table>
</div>